Current memory usage: 6290.08984375 MB
@analyze_image: file_name: data/crop1008/20230424.jpg, output_dir: output/crop1008, external_logger: <Logger data_crop1008.log (DEBUG)>
Loaded image & JSON file: data/crop1008/20230424.jpg
Scaled JSON data: scalar_position: 0.5, scalar_size: 0.5

@find_prev_next_date: image_output_dir: output/crop1008/20230424
data_dir: data/crop1008
Previous date file: None, Next date file: data/crop1008/20230426.jpg


Loaded next_results from JSON file: 20230426, length: 12
Scaled JSON data: scalar_position: 0.5, scalar_size: 0.5

@process_image: output_dir: output/crop1008/20230424, image_name: 20230424, date_string: 20230424
len(json_data) = 10 json_data entries
len(matching) = 0 matching entries, setting max_id_i to 0
crop_dir: output/crop1008
nodules_dir: output/crop1008/nodules-last-detected-on
Split image into left and right images: (705, 300, 3), (705, 300, 3)
Converted right image to HSV: (705, 300, 3)
Created mask to detect nodules: (705, 300)

Found 11 contours in mask, processing each contour...

@process_contour: max_id: 20230424_0
Moments: {'m00': 46.0, 'm10': 7736.833333333333, 'm01': 25909.833333333332, 'm20': 1301484.1666666665, 'm11': 4357825.166666666, 'm02': 14594042.166666666, 'm30': 218970067.35000002, 'm21': 733069634.2, 'm12': 2454598993.2, 'm03': 8220358596.85, 'mu20': 210.47041062801145, 'mu11': -2.2723429948091507, 'mu02': 140.789251210168, 'mu30': 5.775011450052261, 'mu21': 10.660272035733215, 'mu12': -10.084398311257246, 'mu03': -8.585654258728027, 'nu20': 0.09946616759357818, 'nu11': -0.001073886103406971, 'nu02': 0.06653556295376559, 'nu30': 0.0004024002764709992, 'nu21': 0.0007428031011776241, 'nu12': -0.0007026764714824714, 'nu03': -0.0005982446402535367}
Centroid: 168, 563
Processing contour#1: area: 46.0 centroid: 168, 563 rectangle: (164, 560, 10, 8)
@find_dayJSON_match_for_contour: x: 164, y: 560, w: 10, h: 8, area: 46.0
Matched with JSON#9: (168, 562, 7, 191.0, 48.9706, 0.495009)
Match with input JSON(nodules) ID: 9
Matched contour: {'x': 168, 'y': 562, 'd': 7, 'a': 191.0, 'p': 48.9706, 'e': 0.495009, 'id': 9, 'tq': 100}
JSON_entry: 9
WARNING: match is empty
entry_id:20230424_0, entry saved to results list
created dirs at nodule_detection_path: output/crop1008/nodules-last-detected-on/2023-04-24/0/detection and nodule_images_original_path: output/crop1008/nodules-last-detected-on/2023-04-24/0
Segmented nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/0/detection/2023-04-24.jpg
Original nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/0/2023-04-24.jpg


@process_contour: max_id: 20230424_1
Moments: {'m00': 35.5, 'm10': 4965.0, 'm01': 18711.166666666664, 'm20': 694501.0833333333, 'm11': 2616924.625, 'm02': 9862295.583333332, 'm30': 97160408.60000001, 'm21': 366053290.6, 'm12': 1379328819.7, 'm03': 5198281538.55, 'mu20': 100.37910798110534, 'mu11': -3.3327464782632887, 'mu02': 105.21635367907584, 'mu30': -3.8871056884527206, 'mu21': -17.181916161476693, 'mu12': 6.9647785458237195, 'mu03': 22.574225425720215, 'nu20': 0.07965015511295802, 'nu11': -0.0026445121827123894, 'nu02': 0.08348847742834821, 'nu30': -0.0005176729429047476, 'nu21': -0.0022882354679671247, 'nu12': 0.000927548077019637, 'nu03': 0.003006366856615996}
Centroid: 139, 527
Processing contour#2: area: 35.5 centroid: 139, 527 rectangle: (136, 524, 8, 8)
@find_dayJSON_match_for_contour: x: 136, y: 524, w: 8, h: 8, area: 35.5
Matched with JSON#8: (139, 527, 6, 138.0, 42.1421, 0.177746)
Match with input JSON(nodules) ID: 8
Matched contour: {'x': 139, 'y': 527, 'd': 6, 'a': 138.0, 'p': 42.1421, 'e': 0.177746, 'id': 8, 'tq': 100}
JSON_entry: 8
WARNING: match is empty
entry_id:20230424_1, entry saved to results list
created dirs at nodule_detection_path: output/crop1008/nodules-last-detected-on/2023-04-24/1/detection and nodule_images_original_path: output/crop1008/nodules-last-detected-on/2023-04-24/1
Segmented nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/1/detection/2023-04-24.jpg
Original nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/1/2023-04-24.jpg


@process_contour: max_id: 20230424_2
Moments: {'m00': 0.5, 'm10': 51.166666666666664, 'm01': 202.33333333333331, 'm20': 5236.083333333333, 'm11': 20705.458333333332, 'm02': 81877.58333333333, 'm30': 535831.55, 'm21': 2118871.2333333334, 'm12': 8378817.266666667, 'm03': 33133151.200000003, 'mu20': 0.027777777778283053, 'mu11': 0.013888888890505768, 'mu02': 0.027777777781011537, 'mu30': 0.003703703754581511, 'mu21': 0.00185185177845959, 'mu12': -0.0018518516929661999, 'mu03': -0.003703698515892029, 'nu20': 0.11111111111313221, 'nu11': 0.05555555556202307, 'nu02': 0.11111111112404615, 'nu30': 0.020951312322965307, 'nu21': 0.010475655602409154, 'nu12': -0.010475655118785508, 'nu03': -0.020951282688462445}
Centroid: 102, 404
Processing contour#3: area: 0.5 centroid: 102, 404 rectangle: (102, 404, 2, 2)
@find_dayJSON_match_for_contour: x: 102, y: 404, w: 2, h: 2, area: 0.5
Closest match: {'x': 82, 'y': 292, 'd': 1, 'a': 10.0, 'p': 7.0, 'e': 0.582102}
No input JSON(nodules) match, ID:20230424_2 area: 0.5 position: {'x': 102, 'y': 404}
Matched contour: None
JSON_entry: ERROR
WARNING: match is empty
entry_id:20230424_2, entry saved to results list
created dirs at nodule_detection_path: output/crop1008/nodules-last-detected-on/2023-04-24/2/detection and nodule_images_original_path: output/crop1008/nodules-last-detected-on/2023-04-24/2
Segmented nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/2/detection/2023-04-24.jpg
Original nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/2/2023-04-24.jpg


@process_contour: max_id: 20230424_3
Moments: {'m00': 18.5, 'm10': 4742.166666666666, 'm01': 7460.166666666666, 'm20': 1215607.4166666665, 'm11': 1912289.375, 'm02': 3008353.4166666665, 'm30': 311617127.05, 'm21': 490196421.51666665, 'm12': 771141243.1833333, 'm03': 1213144975.05, 'mu20': 32.02777777775191, 'mu11': -0.013888888526707888, 'mu02': 24.406156156677753, 'mu30': 6.337037146091461, 'mu21': 0.011661585558613297, 'mu12': -4.754104367301807, 'mu03': 0.5335304737091064, 'nu20': 0.09358006655296396, 'nu11': -4.058112060396754e-05, 'nu02': 0.07131090184566181, 'nu30': 0.004304839181095713, 'nu21': 7.921880410213696e-06, 'nu12': -0.0032295305013324413, 'nu03': 0.000362434815290314}
Centroid: 256, 403
Processing contour#4: area: 18.5 centroid: 256, 403 rectangle: (254, 401, 6, 6)
@find_dayJSON_match_for_contour: x: 254, y: 401, w: 6, h: 6, area: 18.5
Matched with JSON#7: (255, 403, 4, 75.0, 29.3137, 0.327792)
Match with input JSON(nodules) ID: 7
Matched contour: {'x': 255, 'y': 403, 'd': 4, 'a': 75.0, 'p': 29.3137, 'e': 0.327792, 'id': 7, 'tq': 100}
JSON_entry: 7
WARNING: match is empty
entry_id:20230424_3, entry saved to results list
created dirs at nodule_detection_path: output/crop1008/nodules-last-detected-on/2023-04-24/3/detection and nodule_images_original_path: output/crop1008/nodules-last-detected-on/2023-04-24/3
Segmented nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/3/detection/2023-04-24.jpg
Original nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/3/2023-04-24.jpg


@process_contour: max_id: 20230424_4
Moments: {'m00': 21.0, 'm10': 3951.1666666666665, 'm01': 7696.5, 'm20': 743450.3333333333, 'm11': 1448102.5833333333, 'm02': 2820805.0, 'm30': 139894020.45000002, 'm21': 272474547.1666667, 'm12': 530736687.9, 'm03': 1033852703.25, 'mu20': 35.1891534391325, 'mu11': 0.0, 'mu02': 37.75, 'mu30': 8.45909133553505, 'mu21': 8.021015673875809e-08, 'mu12': -11.58412696823234, 'mu03': 0.0, 'nu20': 0.0797939987281916, 'nu11': 0.0, 'nu02': 0.08560090702947844, 'nu30': 0.00418577112143769, 'nu21': 3.9690002673537535e-11, 'nu12': -0.005732117340665586, 'nu03': 0.0}
Centroid: 188, 366
Processing contour#5: area: 21.0 centroid: 188, 366 rectangle: (186, 364, 6, 6)
@find_dayJSON_match_for_contour: x: 186, y: 364, w: 6, h: 6, area: 21.0
Matched with JSON#6: (188, 366, 5, 109.0, 35.5563, 0.444531)
Match with input JSON(nodules) ID: 6
Matched contour: {'x': 188, 'y': 366, 'd': 5, 'a': 109.0, 'p': 35.5563, 'e': 0.444531, 'id': 6, 'tq': 100}
JSON_entry: 6
WARNING: match is empty
entry_id:20230424_4, entry saved to results list
created dirs at nodule_detection_path: output/crop1008/nodules-last-detected-on/2023-04-24/4/detection and nodule_images_original_path: output/crop1008/nodules-last-detected-on/2023-04-24/4
Segmented nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/4/detection/2023-04-24.jpg
Original nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/4/2023-04-24.jpg


@process_contour: max_id: 20230424_5
Moments: {'m00': 1.0, 'm10': 82.5, 'm01': 292.5, 'm20': 6806.333333333333, 'm11': 24131.25, 'm02': 85556.33333333333, 'm30': 561536.25, 'm21': 1990852.5, 'm12': 7058397.5, 'm03': 25025276.25, 'mu20': 0.08333333333303017, 'mu11': 0.0, 'mu02': 0.0833333333284827, 'mu30': 1.1641532182693481e-10, 'mu21': 8.86757334228605e-11, 'mu12': 4.001776687800884e-10, 'mu03': 3.725290298461914e-09, 'nu20': 0.08333333333303017, 'nu11': 0.0, 'nu02': 0.0833333333284827, 'nu30': 1.1641532182693481e-10, 'nu21': 8.86757334228605e-11, 'nu12': 4.001776687800884e-10, 'nu03': 3.725290298461914e-09}
Centroid: 82, 292
Processing contour#6: area: 1.0 centroid: 82, 292 rectangle: (82, 292, 2, 2)
@find_dayJSON_match_for_contour: x: 82, y: 292, w: 2, h: 2, area: 1.0
Matched with JSON#5: (82, 292, 1, 10.0, 7.0, 0.582102)
Match with input JSON(nodules) ID: 5
Matched contour: {'x': 82, 'y': 292, 'd': 1, 'a': 10.0, 'p': 7.0, 'e': 0.582102, 'id': 5, 'tq': 100}
JSON_entry: 5
WARNING: match is empty
entry_id:20230424_5, entry saved to results list
created dirs at nodule_detection_path: output/crop1008/nodules-last-detected-on/2023-04-24/5/detection and nodule_images_original_path: output/crop1008/nodules-last-detected-on/2023-04-24/5
Segmented nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/5/detection/2023-04-24.jpg
Original nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/5/2023-04-24.jpg


@process_contour: max_id: 20230424_6
Moments: {'m00': 29.0, 'm10': 4070.833333333333, 'm01': 4860.5, 'm20': 571488.3333333333, 'm11': 682281.6666666666, 'm02': 814727.0, 'm30': 80236163.35000001, 'm21': 95782282.5, 'm12': 114364767.7, 'm03': 136581370.25, 'mu20': 50.95306513411924, 'mu11': -4.037356321816333, 'mu02': 90.43965517240576, 'mu30': 4.7356410175561905, 'mu21': 0.6600938165192929, 'mu12': -10.990546964281748, 'mu03': -0.34958383440971375, 'nu20': 0.06058628434496937, 'nu11': -0.004800661500376138, 'nu02': 0.1075382344499474, 'nu30': 0.0010456438290608974, 'nu21': 0.00014575070688124957, 'nu12': -0.002426745939694494, 'nu03': -7.718916569790996e-05}
Centroid: 140, 167
Processing contour#7: area: 29.0 centroid: 140, 167 rectangle: (138, 164, 6, 8)
@find_dayJSON_match_for_contour: x: 138, y: 164, w: 6, h: 8, area: 29.0
Matched with JSON#4: (140, 167, 6, 139.0, 41.5563, 0.294386)
Match with input JSON(nodules) ID: 4
Matched contour: {'x': 140, 'y': 167, 'd': 6, 'a': 139.0, 'p': 41.5563, 'e': 0.294386, 'id': 4, 'tq': 100}
JSON_entry: 4
WARNING: match is empty
entry_id:20230424_6, entry saved to results list
created dirs at nodule_detection_path: output/crop1008/nodules-last-detected-on/2023-04-24/6/detection and nodule_images_original_path: output/crop1008/nodules-last-detected-on/2023-04-24/6
Segmented nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/6/detection/2023-04-24.jpg
Original nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/6/2023-04-24.jpg


@process_contour: max_id: 20230424_7
Moments: {'m00': 64.0, 'm10': 8532.666666666666, 'm01': 8666.166666666666, 'm20': 1137963.3333333333, 'm11': 1155112.0, 'm02': 1174049.1666666665, 'm30': 151813563.4, 'm21': 154013711.88333333, 'm12': 156450238.88333333, 'm03': 159131965.15, 'mu20': 363.32638888899237, 'mu11': -286.61631944426335, 'mu02': 573.4683159722481, 'mu30': 93.27254050970078, 'mu21': -174.11966872181074, 'mu12': 200.44806672896084, 'mu03': 7.381203472614288, 'nu20': 0.08870273166235165, 'nu11': -0.06997468736432211, 'nu02': 0.14000691307916213, 'nu30': 0.0028464520419220207, 'nu21': -0.005313710593316978, 'nu12': 0.006117189536406276, 'nu03': 0.00022525645363202784}
Centroid: 133, 135
Processing contour#8: area: 64.0 centroid: 133, 135 rectangle: (128, 130, 12, 12)
@find_dayJSON_match_for_contour: x: 128, y: 130, w: 12, h: 12, area: 64.0
Matched with JSON#3: (133, 135, 9, 264.0, 69.9411, 0.892221)
Match with input JSON(nodules) ID: 3
Matched contour: {'x': 133, 'y': 135, 'd': 9, 'a': 264.0, 'p': 69.9411, 'e': 0.892221, 'id': 3, 'tq': 100}
JSON_entry: 3
WARNING: match is empty
entry_id:20230424_7, entry saved to results list
created dirs at nodule_detection_path: output/crop1008/nodules-last-detected-on/2023-04-24/7/detection and nodule_images_original_path: output/crop1008/nodules-last-detected-on/2023-04-24/7
Segmented nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/7/detection/2023-04-24.jpg
Original nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/7/2023-04-24.jpg


@process_contour: max_id: 20230424_8
Moments: {'m00': 2.5, 'm10': 466.16666666666663, 'm01': 274.3333333333333, 'm20': 86924.75, 'm11': 51154.125, 'm02': 30104.916666666664, 'm30': 16208645.05, 'm21': 9538580.9, 'm12': 5613585.933333334, 'm03': 3303821.2, 'mu20': 0.2055555555562023, 'mu11': 0.10277777777810115, 'mu02': 1.405555555553292, 'mu30': 0.008148148655891418, 'mu21': 0.004074074378390691, 'mu12': -0.0840740738368595, 'mu03': -0.12814814737066627, 'nu20': 0.03288888888899238, 'nu11': 0.01644444444449619, 'nu02': 0.22488888888852676, 'nu30': 0.0008245346709202062, 'nu21': 0.0004122673405647763, 'nu12': -0.008507698095796724, 'nu03': -0.012967680755911143}
Centroid: 186, 109
Processing contour#9: area: 2.5 centroid: 186, 109 rectangle: (186, 108, 2, 4)
@find_dayJSON_match_for_contour: x: 186, y: 108, w: 2, h: 4, area: 2.5
Matched with JSON#2: (186, 109, 1, 9.0, 8.8284, 0.570088)
Match with input JSON(nodules) ID: 2
Matched contour: {'x': 186, 'y': 109, 'd': 1, 'a': 9.0, 'p': 8.8284, 'e': 0.570088, 'id': 2, 'tq': 100}
JSON_entry: 2
WARNING: match is empty
entry_id:20230424_8, entry saved to results list
created dirs at nodule_detection_path: output/crop1008/nodules-last-detected-on/2023-04-24/8/detection and nodule_images_original_path: output/crop1008/nodules-last-detected-on/2023-04-24/8
Segmented nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/8/detection/2023-04-24.jpg
Original nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/8/2023-04-24.jpg


@process_contour: max_id: 20230424_9
Moments: {'m00': 47.5, 'm10': 12495.833333333332, 'm01': 4745.166666666666, 'm20': 3287458.9166666665, 'm11': 1248301.7083333333, 'm02': 474219.5833333333, 'm30': 864925948.95, 'm21': 328406050.01666665, 'm12': 124751025.64999999, 'm03': 47410821.550000004, 'mu20': 177.84941520541906, 'mu11': -10.119152046507224, 'mu02': 185.75818713457556, 'mu30': -18.758397579193115, 'mu21': -4.19234130060795, 'mu12': 18.43715498552774, 'mu03': 3.3051749244332314, 'nu20': 0.078825225575809, 'nu11': -0.0044849427352940605, 'nu02': 0.08233049845299747, 'nu30': -0.001206317733746326, 'nu21': -0.00026960168828333604, 'nu12': 0.0011856592187565892, 'nu03': 0.00021254966516436226}
Centroid: 263, 99
Processing contour#10: area: 47.5 centroid: 263, 99 rectangle: (259, 96, 9, 9)
@find_dayJSON_match_for_contour: x: 259, y: 96, w: 9, h: 9, area: 47.5
Matched with JSON#1: (263, 99, 6, 148.0, 43.2132, 0.297537)
Match with input JSON(nodules) ID: 1
Matched contour: {'x': 263, 'y': 99, 'd': 6, 'a': 148.0, 'p': 43.2132, 'e': 0.297537, 'id': 1, 'tq': 100}
JSON_entry: 1
WARNING: match is empty
entry_id:20230424_9, entry saved to results list
created dirs at nodule_detection_path: output/crop1008/nodules-last-detected-on/2023-04-24/9/detection and nodule_images_original_path: output/crop1008/nodules-last-detected-on/2023-04-24/9
Segmented nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/9/detection/2023-04-24.jpg
Original nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/9/2023-04-24.jpg


@process_contour: max_id: 20230424_10
Moments: {'m00': 42.0, 'm10': 4524.166666666666, 'm01': 4090.6666666666665, 'm20': 487503.8333333333, 'm11': 440643.0, 'm02': 398565.0, 'm30': 52549299.150000006, 'm21': 47482141.88333333, 'm12': 42933448.38333333, 'm03': 38847635.4, 'mu20': 168.49933862447506, 'mu11': 3.529100529209245, 'mu02': 147.0529100529384, 'mu30': -63.488600201904774, 'mu21': 55.850789432777674, 'mu12': 35.04410009370804, 'mu03': 24.712505243718624, 'nu20': 0.09552116702067745, 'nu11': 0.0020006238827716804, 'nu02': 0.0833633276944095, 'nu30': -0.0055535735235588725, 'nu21': 0.0048854670677465975, 'nu12': 0.0030654319959557874, 'nu03': 0.0021616906718035975}
Centroid: 107, 97
Processing contour#11: area: 42.0 centroid: 107, 97 rectangle: (104, 94, 8, 8)
@find_dayJSON_match_for_contour: x: 104, y: 94, w: 8, h: 8, area: 42.0
Matched with JSON#0: (107, 97, 8, 207.0, 52.0416, 0.57867)
Match with input JSON(nodules) ID: 0
Matched contour: {'x': 107, 'y': 97, 'd': 8, 'a': 207.0, 'p': 52.0416, 'e': 0.57867, 'id': 0, 'tq': 100}
JSON_entry: 0
WARNING: match is empty
entry_id:20230424_10, entry saved to results list
created dirs at nodule_detection_path: output/crop1008/nodules-last-detected-on/2023-04-24/10/detection and nodule_images_original_path: output/crop1008/nodules-last-detected-on/2023-04-24/10
Segmented nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/10/detection/2023-04-24.jpg
Original nodule image saved as output/crop1008/nodules-last-detected-on/2023-04-24/10/2023-04-24.jpg


Done analyzing contours, found 11 nodules.


results_entry: {'date': '20230424', 'json': 'output/crop1008/20230424/20230424.json', 'log': 'output/crop1008/20230424/crop1008_20230424.log', 'image': 'data/crop1008/20230424.jpg', 'plot': None, 'match_stats': {}}
